<div class="col-lg-12">
<h1 class="page-header">Dashboard</h1>
</div>

<div class="col-sm-8 col-md-8">
	<p>This is a summary of your leaves. When you request for leave, your HR is notified. When they respond, LineUP will notify you.</p>

</div>

<div class="col-sm-4 col-md-4">
	<%=link_to "Request Leave",new_leafe_path, class: "btn btn-default"%>
</div>

<div class="col-sm-12 col-md-8">
	<div class="col-lg-12">
		<h3 class="page-header">Upcoming</h3>
	
	<%@leaves = current_user.leaves.where(status: "Approved").where("start_date >= ?", Date.today).order("start_date")%>
	<%=render "leaves_table"%>
	</div>

	<div class="col-lg-12">
		<h3 class="page-header">Requests</h3>
	<%@leaves = current_user.leaves.where.not(status: "Approved").where("start_date >= ?", Date.today).order("start_date")%>
	<%=render "leaves_table"%>
	</div>

	<div class="col-lg-12">
		<h3 class="page-header">History</h3>
	
	<%@leaves = current_user.leaves.where("start_date < ?", Date.today).order("start_date DESC").limit(10)%>
	<%=render "leaves_table"%>
	</div>

</div>

<div class="col-sm-12 col-md-4">
	<div class="col-lg-12">
		<h3 class="page-header">Remaining Leaves</h3>
	</div>

	<div class="col-lg-12" style="border:1px solid #eee">
		<table class="table table-hover">
			<thead>
				<tr>
					<th>Type</th>
					<th>Total</th>
					<th>Remaining</th>
				</tr>
			</thead>
			<tbody>
			<%current_user.total_leafe.attributes.each do |key,value|%>
			<%next if key == "id" || key == "user_id"%>
				<tr>
					<td><%=key.capitalize%></td>
					<td><%=value%></td>
					<td><%=current_user.remaining_leafe.send(key)%></td>
				</tr>
			<%end%>
			</tbody>
		</table>
	</div>


</div>

