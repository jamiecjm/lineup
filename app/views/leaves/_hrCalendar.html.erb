<div id="hrCalendar"></div>
<div id="eventContent" title="Event Details" style="display:none;">
    Start: <span id="startTime"></span><br>
    End: <span id="endTime"></span><br><br>
    Reason: <p id="eventInfo"></p>
    <p><strong><a id="eventLink" href="" target="_blank">Read More</a></strong></p>
</div>

<%=javascript_tag do%>
	$('#hrCalendar').fullCalendar({
	theme: true,
	events: [
		<%Leafe.where(status:"Approved").each do |leave|%>
			{
				title: '<%=leave.user.name+" "+leave.leave_type+" Leave"%>',
				start: "<%=leave.start_date%>",
				end:	"<%=leave.end_date%>",
				url: '<%=leafe_path(leave)%>',
				description: '<%=leave.leave_reason%>'
			},
		<%end%>
	],
    header: {
        left: '',
        center: 'prev title next',
        right: ''
    },
    eventRender: function (event, element) {
        element.attr('href', 'javascript:void(0);');
        element.click(function() {
            $("#startTime").html(moment(event.start).format('MMM Do'));
            $("#endTime").html(moment(event.end).format('MMM Do'));
            $("#eventInfo").html(event.description);
            $("#eventLink").attr('href', event.url);
            $("#eventContent").dialog({ modal: true, title: event.title, width:350});
        });
    }
	})
<%end%>